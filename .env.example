# ========================================
# ShopCode Environment Configuration
# ========================================
#
# IMPORTANT: 
# 1. Copy this file to .env
# 2. Fill in your actual values
# 3. NEVER commit .env to git
# 4. chmod 600 .env (only owner can read)
#
# ========================================

# ----------------------------------------
# Application
# ----------------------------------------

# Application name (displayed in UI)
APP_NAME="ShopCode"

# Base URL of your application (no trailing slash)
# Development: http://localhost
# Production: https://your-domain.com
APP_URL=http://localhost

# Environment: development | production | staging
APP_ENV=development

# Debug mode (true only in development!)
# NEVER set to true in production
APP_DEBUG=true

# ----------------------------------------
# Database
# ----------------------------------------

DB_HOST=localhost
DB_PORT=3306
DB_NAME=shopcode
DB_USER=root
DB_PASS=

# Database charset (recommended: utf8mb4)
DB_CHARSET=utf8mb4

# ----------------------------------------
# Security
# ----------------------------------------

# Session secret (32+ random characters)
# Generate: openssl rand -base64 32
SESSION_SECRET=change-this-to-random-32-chars

# CSRF token name
CSRF_TOKEN_NAME=_csrf

# Session lifetime (seconds)
# 3600 = 1 hour, 86400 = 1 day
SESSION_LIFETIME=3600

# Remember me lifetime (seconds)
# 2592000 = 30 days
REMEMBER_LIFETIME=2592000

# Encryption key for sensitive data (AES-256-CBC)
# Generate: php -r "echo base64_encode(random_bytes(32)) . PHP_EOL;"
# REQUIRED if using per-user Shoptet credentials
ENCRYPTION_KEY=

# ----------------------------------------
# Email / SMTP
# ----------------------------------------

# Admin email (receives notifications)
ADMIN_EMAIL=admin@example.com

# SMTP server settings (for sending emails)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_ENCRYPTION=tls
SMTP_USER=your@email.com
SMTP_PASS=your_password

# Email sender
SMTP_FROM_EMAIL=noreply@example.com
SMTP_FROM_NAME="ShopCode"

# ----------------------------------------
# Photo Reviews
# ----------------------------------------

# Max file size for uploaded photos (bytes)
# 5242880 = 5MB
MAX_PHOTO_SIZE=5242880

# Max number of photos per review
MAX_PHOTOS_PER_REVIEW=5

# Image resize dimensions
IMAGE_MAX_WIDTH=1920
IMAGE_MAX_HEIGHT=1920
THUMBNAIL_WIDTH=300
THUMBNAIL_HEIGHT=300

# ----------------------------------------
# API
# ----------------------------------------

# CORS allowed origins (comma-separated)
# Use * for all origins (development)
# Use specific domains in production: https://domain1.com,https://domain2.com
CORS_ALLOWED_ORIGINS=*

# API rate limiting
# Format: max_requests,window_seconds
# Example: 100,3600 = max 100 requests per hour
API_RATE_LIMIT=100,3600

# ----------------------------------------
# Shoptet Integration (LEGACY - not used in new CSV/XML export approach)
# ----------------------------------------

# These are only needed if you're using the old Selenium-based auto-upload
# With the new CSV/XML export approach, users manage their own credentials in UI

# Shoptet admin URL
# SHOPTET_URL=https://admin.shoptet.cz

# Global Shoptet credentials (LEGACY - use per-user credentials instead)
# SHOPTET_EMAIL=
# SHOPTET_PASSWORD=

# ChromeDriver URL (for Selenium - LEGACY)
# CHROMEDRIVER_URL=http://localhost:9515

# ----------------------------------------
# CRON
# ----------------------------------------

# XML feed generation time (hour in 24h format)
# Default: 18 (6 PM)
XML_FEED_GENERATION_HOUR=18

# CRON worker timeouts
MAX_EXECUTION_TIME=600  # 10 minutes
PER_USER_TIMEOUT=120    # 2 minutes per user
LOCK_MAX_AGE=1800       # 30 minutes (hung process detection)

# ----------------------------------------
# Logging
# ----------------------------------------

# Log level: debug | info | warning | error
LOG_LEVEL=info

# Log file paths
LOG_PATH_XML_FEEDS=/var/log/shopcode-xml-feeds.log
LOG_PATH_MONITOR=/var/log/shopcode-monitor.log

# ----------------------------------------
# File Paths
# ----------------------------------------

# Upload directory (relative to public/)
UPLOAD_DIR=uploads

# Feeds directory (relative to public/)
FEEDS_DIR=feeds

# Temp directory (relative to project root)
TMP_DIR=tmp

# ----------------------------------------
# Feature Flags
# ----------------------------------------

# Enable/disable features
FEATURE_PHOTO_REVIEWS=true
FEATURE_XML_IMPORT=true
FEATURE_API=true
FEATURE_AUTO_XML_FEEDS=true

# ----------------------------------------
# Development Only
# ----------------------------------------

# Display errors (true only in development!)
DISPLAY_ERRORS=true

# Error reporting level
# E_ALL in development, E_ALL & ~E_NOTICE in production
ERROR_REPORTING=E_ALL

# Query logging (slow query detection)
LOG_SLOW_QUERIES=false
SLOW_QUERY_THRESHOLD=1000  # milliseconds
